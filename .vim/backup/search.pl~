open (FILE, 'f.dat') or die("Error reading file, stopped");

my %hashname;
my $CValue;

sub read_data
{
    while (<FILE>) {
	next if /^\s*$/;
	next if /^\---*$/;
	$CValue="";
	my ( $key, $value ) = split(/\:/, $_);
	$value =~ s/^\s+//;
	$value =~ s/\s+$//;

	push @{$hashname{$key}},$value;
    }
}

sub print_data {
    foreach my $family( keys %hashname ){
	print "key: $key, value: $hashname{$key}\n";
    }
}

sub search_data {
    my $searchKey = 'MDN';
    my $searchVal = 'A-4047180967';

    if ( defined $hashname{$searchKey} and $searchVal ~~ @{ $hashname{$searchKey} } ){
	print "key: [$searchKey] with val: [$searchVal] found.\n";
    }

    else {
	print "key: [$searchKey] with val: [$searchVal] not found.\n";
    }
}

print "Let us read data from a file \n";
read_data;

print "Print the data stored in the hash table \n";
print_data;

print "Search the data stored in the hash table \n";
search_data;

public class SingletonPlusPlus {
    private static SingletonPlusPlus[] instanceList;
    private static boolean[] inUse;
    private static counter;
    private static final MAX_INSTANCES;
    private SingletonPlusPlus(){
    }

    protected setUp(int max){
	MAX_INSTANCES = max;
	counter = 0;
	instanceList = new SingletonPlusPlus[max];
	inUse = new boolean[max];
    }	

    public SingletonPlusPlus getInstance(){
	if (instanceList == null){
	    setUp(8);
	}
	if (counter == MAX_INSTANCES) {
	    return null;
	}
	for (int i = 0; i<inUse.length; i++){
	    if (!inUse[i]){
		return instanceList[i];
	    }
	}
	for (int i = 0; i<instanceList.length; i++){
	    if (instanceList[i] == null) {
		instanceList[i] = new SingletonPlusPlus();
		inUse[i] = true;
		return instanceList[i];
	    }
	}

    }
}
